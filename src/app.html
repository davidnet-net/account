<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="preconnect" href="https://design.davidnet.net" crossorigin>
	<link rel="dns-prefetch" href="https://design.davidnet.net">

	<link rel="preload"
		href="https://design.davidnet.net/fonts/Material_Symbols_Outlined/kJF1BvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oDMzByHX9rA6RzaxHMPdY43zj-jCxv3fzvRNU22ZXGJpEpjC_1v-p_4MrImHCIJIZrDCvHOej.woff2"
		as="font" type="font/woff2" crossorigin="anonymous">
	<link rel="stylesheet" href="https://design.davidnet.net/global.css" />
	<link rel="stylesheet" href="/scrollbar.css" />
	<style>
		#initloader {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: white;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			z-index: 9999;
			font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		}

		.initloader {
			width: 30px;
			height: 30px;
			border: 3px solid black;
			border-bottom-color: transparent;
			border-radius: 50%;
			display: inline-block;
			box-sizing: border-box;
			animation: rotation 1s linear infinite;
		}

		@keyframes rotation {
			0% {
				transform: rotate(0deg);
			}

			100% {
				transform: rotate(360deg);
			}
		}
	</style>
	%sveltekit.head%
</head>


<body data-sveltekit-preload-data="hover">
	<div id="initloader">
		<h1>Davidnet</h1>
		<span class="initloader"></span>
		<p>Initializing resources...</p>
	</div>
	<div style="display: contents">%sveltekit.body%</div>

	<script>
		// Function to log errors
		function logImageError(img) {
			alert("Profile picture failed to load:", img.src);
		}

		// Listen for errors on all current and future images
		document.addEventListener("DOMContentLoaded", () => {
			const imgs = document.querySelectorAll("img");
			imgs.forEach((img) => {
				img.addEventListener("error", () => logImageError(img));
			});
		});

		// Optional: observe newly added images dynamically
		const observer = new MutationObserver((mutations) => {
			mutations.forEach((mutation) => {
				mutation.addedNodes.forEach((node) => {
					if (node.tagName === "IMG") {
						node.addEventListener("error", () => logImageError(node));
					} else if (node.querySelectorAll) {
						node.querySelectorAll("img").forEach((img) => {
							img.addEventListener("error", () => logImageError(img));
						});
					}
				});
			});
		});

		observer.observe(document.body, { childList: true, subtree: true });
	</script>

</body>

</html>